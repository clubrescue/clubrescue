<?php	// Include database class	require_once 'util/utility.class.php';	require_once 'util/database.class.php';	if(!isset($user)){		header("Expires: Wed, 9 Apr 1986 21:00:00 GMT");		require_once("wp-authenticate.php");		/*** REQUIRE USER AUTHENTICATION ***/login();		/*** RETRIEVE LOGGED IN USER INFORMATION ***/		$user = wp_get_current_user();	}	if($user->ID != 0){
		$dataTableQuery =  'SELECT * , DATEDIFF(CURDATE( ),`LidSinds`) as `DagenLid` FROM `cr_leden` where `Relatienr` = \''.$user->user_login.'\'';
		$database = new Database();		$database->query($dataTableQuery);		$dataTableResult = $database->resultset();
		// Build table		/*** 		foreach ($dataTableResult as $key => $value) {			if(file_exists('./pasfotos/'.$value["Relatienr"].'.jpg') || file_exists('././clubredders/pasfotos/'.$value["Relatienr"].'.jpg')){				//HTTP Auth voor de pasfotos zit in de url.				$path= 'https://SU_WP:Wijwillen1pasfoto@trb.nu/clubredders/pasfotos/'.$value["Relatienr"].'.jpg';			}else{				$path = 'https://SU_WP:Wijwillen1pasfoto@trb.nu/clubredders/pasfotos/pasfoto.jpg';			}
			if(@fopen($path,"r")==true){				$type = pathinfo($path, PATHINFO_EXTENSION);				$data = file_get_contents($path);			}			$base64 = 'data:image/' . $type . ';base64,' . base64_encode($data);			***/			$dataTable = '<div class="container"><div class="row"><div class="col s3 push-s7">';			/*** $dataTable .='<img src="'.$base64.'" style="float:left;	position:absolute;right:0;top:0;max-height:230px;"/></div>'; ***/			$dataTable .= '<div class="col s9 pull-s5" style="padding-right:185px">';			$dataTable .= '<table class="striped">'; 			$dataTable .= '<tr>';				$dataTable .= '<th>Roepnaam</th>';				$dataTable .= '<td>' . $value["Roepnaam"] . '</td>';				$dataTable .= '<th>Relatienr</th>';				$dataTable .= '<td>' . $value["Relatienr"] . '</td>';			$dataTable .= '</tr>';			$dataTable .= '<tr>';				$dataTable .= '<th>Voorletters</th>';				$dataTable .= '<td>' . $value["Voorletters"] . '</td>';				$dataTable .= '<th>Lid van de TRB sinds</th>';				$dataTable .= '<td>' . $value["LidSinds"] . ' ('.$value["DagenLid"].' dagen)</td>';			$dataTable .= '</tr>';
			$dataTable .= '<tr>';				$dataTable .= '<th>Tussenvoegsels</th>';				$dataTable .= '<td>' . $value["Tussenvoegsels"] . '</td>';				$dataTable .= '<th>Lidstatus</th>';				$dataTable .= '<td>' . $value["Lidstatus"] . '</td>';			$dataTable .= '</tr>';
			$dataTable .= '<tr>';				$dataTable .= '<th>Achternaam</th>';				$dataTable .= '<td>' . $value["Achternaam"] . '</td>';				$dataTable .= '<th>Functie</th>';				$dataTable .= '<td>' . $value["Verenigingsfunctie"] . '</td>';			$dataTable .= '</tr>';			$dataTable .= '<tr>';				$dataTable .= '<th>Geslacht</th>';				$dataTable .= '<td>' . $value["Geslacht"] . '</td>';				$dataTable .= '<th>Geboortedatum</th>';				$dataTable .= '<td>' . $value["GeboorteDatum"] . '</td>';			$dataTable .= '</tr>';
			$dataTable .= '<tr>';				$dataTable .= '<th>Geboorteplaats</th>';				$dataTable .= '<td>' . ucfirst(strtolower($value["Geboorteplaats"])) . '</td>';				$dataTable .= '<th>Geboorteland</th>';				$dataTable .= '<td>' . $value["Geboorteland"] . '</td>';			$dataTable .= '</tr>';			$dataTable .= '<tr>';				$dataTable .= '<th>Nationaliteit</th>';				$dataTable .= '<td>' . $value["Nationaliteit"] . '</td>';				$dataTable .= '<th>Legitimatie</th>';				$dataTable .= '<td>' . $value["Legitimatietype"].' '. $value["Legitimatienr"] . '</td>';			$dataTable .= '</tr>';			$dataTable .= '<tr>';				$dataTable .= '<th>Straat</th>';				$dataTable .= '<td>' . $value["Straat"] . '</td>';				$dataTable .= '<th>Huisnr</th>';				$dataTable .= '<td>' . $value["Huisnr"].' '. $value["HuisnrToev"] . '</td>';			$dataTable .= '</tr>';			$dataTable .= '<tr>';				$dataTable .= '<th>Postcode</th>';				$dataTable .= '<td>' . $value["Postcode"] . '</td>';				$dataTable .= '<th>Woonplaats</th>';				$dataTable .= '<td>' . ucfirst(strtolower($value["Woonplaats"])).'</td>';			$dataTable .= '</tr>';			$dataTable .= '<tr>';				$dataTable .= '<th>Land</th>';				$dataTable .= '<td>' . $value["Land"] . '</td>';				$dataTable .= '<th>Telefoon</th>';				$dataTable .= '<td>' . $value["Telefoon"] . '</td>';			$dataTable .= '</tr>';			$dataTable .= '<tr>';				$dataTable .= '<th>E-mail adres</th>';				$dataTable .= '<td>' . $value["Email"] . '</td>';				$dataTable .= '<th>Mobiel</th>';				$dataTable .= '<td>' . $value["Mobiel"] . '</td>';			$dataTable .= '</tr>';			$dataTable .= '<tr>';				$dataTable .= '<th>Dieet</th>';				$dataTable .= '<td>' . $value["Dieet"] . '</td>';				$dataTable .= '<th>Noodcontact(en)</th>';				$dataTable .= '<td>' . $value["Noodcontact"] . '</td>';			$dataTable .= '</tr>';
			$dataTable .= '</table>';			$dataTable .= '</div></div></div>';		}	}?><?php include 'header.php'; ?><main>  <div class="container"><br>	<div class="row">      <div class="col s12">        <ul class="tabs">          <li class="tab"><a class="active" href="#datatable">Big Data</a></li>        </ul>      </div>	  <div id="datatable" class="col s12">	    <ul class="collapsible" data-collapsible="accordion">	      <li>	        <div class="collapsible-header"><i class="material-icons">person</i>Leden</div>	        <div class="collapsible-body"><span><?php echo $dataTable ?></span></div>	      </li>	      <li>	        <div class="collapsible-header active"><i class="material-icons">beach_access</i>Strand</div>	        <div class="collapsible-body"><span><?php echo $dataTable ?></span></div>	      </li>	      <li>	        <div class="collapsible-header"><i class="material-icons">fingerprint</i>Kader info</div>	        <div class="collapsible-body"><span><?php echo $dataTable ?></span></div>	      </li>	    </ul>	  </div>	</div>  </div></main><?php include 'footer.php'; ?>